<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Kbank â€“ ë°ëª¨</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root{
      --kb-blue:#0c3bd9;
      --kb-blue-700:#0b2fb1;
      --kb-bg:#eef2ff;
      --kb-card:#ffffff;
      --kb-gray:#6b7280;
      --kb-text:#0f172a;
      --radius:16px;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{margin:0;height:100%;background:#f6f7fb;color:var(--kb-text);font-family: -apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR","Segoe UI",sans-serif}
    .view{position:fixed;inset:0;overflow:auto;background:var(--kb-card);transform:translateX(100%);transition:transform .3s ease}
    #home.view{transform:translateX(0)}
    .view.active{transform:translateX(0)!important}
    .view.hiddenLeft{transform:translateX(-100%)}
    /* Top */
    .appbar{position:sticky;top:0;z-index:10;background:var(--kb-card);display:flex;align-items:center;justify-content:center;height:56px;border-bottom:1px solid #edf0f4}
    .appbar .back{position:absolute;left:8px;background:none;border:0;font-size:22px;height:56px;width:48px}
    .appbar h1{font-size:18px;margin:0}
    /* Home content */
    .wrap{padding:14px 14px 92px}
    .banner{background:#e9f0ff;border:1px solid #dbe6ff;color:#1e3a8a;border-radius:14px;padding:14px;display:flex;align-items:center;gap:10px}
    .section-title{font-weight:800;margin:16px 4px 8px}
    .card{background:var(--kb-card);border-radius:var(--radius);box-shadow:0 1px 6px rgba(0,0,0,.06);padding:16px}
    .kb-head{display:flex;align-items:center;justify-content:space-between;padding:14px 0 6px;color:#2841d8;font-weight:800}
    #acctArea{display:block;border:1px solid #eff3fb;border-radius:14px;padding:16px;cursor:pointer}
    #acctArea:active{transform:scale(.998)}
    .acct-num{color:#64748b;margin:8px 0 12px}
    .balance{font-size:30px;font-weight:900;letter-spacing:-.5px}
    .btns{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .btn{height:48px;border-radius:12px;border:0;font-weight:800}
    .btn.gray{background:#eef1f7;color:#111}
    .btn.blue{background:var(--kb-blue);color:#fff}
    .quick{display:flex;gap:18px;justify-content:space-between;margin-top:14px}
    .qitem{display:flex;flex-direction:column;align-items:center;gap:8px;color:#374151;font-size:12px}
    .qicon{width:48px;height:48px;border-radius:12px;background:#f0f3fb;display:flex;align-items:center;justify-content:center;font-size:20px}
    /* Bottom tabs */
    .tabs{position:fixed;left:0;right:0;bottom:0;background:var(--kb-card);border-top:1px solid #edf0f4;display:flex;justify-content:space-around;padding:8px 6px env(safe-area-inset-bottom)}
    .tab{display:flex;flex-direction:column;align-items:center;font-size:11px;color:#6b7280;gap:4px}
    .tab.active{color:var(--kb-blue)}
    /* Tx view */
    .header-box{padding:12px 16px 8px;border-bottom:1px solid #edf0f4}
    .acc-title{font-size:22px;font-weight:900;margin:6px 0 2px}
    .acc-num{font-size:14px;color:#64748b}
    .row{display:flex;align-items:center;gap:12px;margin:14px 0 6px}
    .row .btn{flex:1}
    .chips{display:flex;gap:10px;align-items:center}
    .chip{font-size:12px;color:#475569;border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;background:#fff}
    .filterline{font-size:13px;color:#6b7280;margin:8px 0 0 16px}
    .tx-list{margin-top:8px}
    .tx-item{padding:14px 16px;border-bottom:1px solid #f0f2f7;background:#fff}
    .tx-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;color:#9ca3af;font-size:12px}
    .tx-name{font-weight:700}
    .tx-amt{font-size:18px;font-weight:900}
    .deposit{color:#2563eb}
    .withdraw{color:#d32f2f}
    .tx-bal{color:#94a3b8;font-size:12px;margin-top:2px;text-align:right}
    /* Filter sheet */
    .mask{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:.2s}
    .mask.show{opacity:1;pointer-events:auto}
    .sheet{position:fixed;left:0;right:0;bottom:-100%;background:#fff;border-top-left-radius:20px;border-top-right-radius:20px;box-shadow:0 -10px 30px rgba(0,0,0,.2);transition:bottom .25s ease;z-index:30}
    .sheet.show{bottom:0}
    .sheet-head{padding:16px;border-bottom:1px solid #edf0f4;font-weight:800}
    .sheet-body{padding:14px 16px 22px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .opt{padding:12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;text-align:center}
    .opt.selected{border-color:var(--kb-blue);box-shadow:0 0 0 3px rgba(12,59,217,.12);font-weight:800;color:var(--kb-blue)}
    .range{display:flex;gap:10px}
    .range input{flex:1;height:44px;border:1px solid #e5e7eb;border-radius:12px;padding:0 12px}
    .confirm{margin-top:10px;width:100%;height:52px;border:0;border-radius:14px;background:var(--kb-blue);color:#fff;font-weight:900}
  </style>
</head>
<body>
  <!-- ===== HOME ===== -->
  <section id="home" class="view">
    <div class="wrap">
      <div class="banner">í•œêµ­íˆ¬ìì¦ê¶Œ Â· ì§€ê¸ˆ êµ­ë‚´ ìš°ëŸ‰ì£¼ 2ì£¼ ë¿Œë¦¬ëŠ” ì¤‘!</div>

      <h3 class="section-title">Kbank</h3>
      <div class="card">
        <!-- Clicking this goes to Tx screen -->
        <div id="acctArea" aria-label="ê³„ì¢Œ ìƒì„¸ ë³´ê¸°">
          <div class="acc-label" style="color:#64748b;margin-bottom:6px">MY ì…ì¶œê¸ˆí†µì¥ 100-116-054706</div>
          <div class="balance">10,300ì›</div>
        </div>
        <div class="btns">
          <button class="btn gray" id="btnGet">ê°€ì ¸ì˜¤ê¸°</button>
          <button class="btn blue" id="btnTransfer">ì´ì²´í•˜ê¸°</button>
        </div>
        <div class="quick">
          <div class="qitem"><div class="qicon">ğŸ’³</div><div>ì²´í¬ì¹´ë“œ</div></div>
          <div class="qitem"><div class="qicon">âš¡</div><div>ìë™ì¶©ì „</div></div>
          <div class="qitem"><div class="qicon">ğŸº</div><div>í”ŒëŸ¬ìŠ¤ë°•ìŠ¤</div></div>
          <div class="qitem"><div class="qicon">â­</div><div>ì…ì¶œê¸ˆë¦¬ì›Œë“œ</div></div>
        </div>
      </div>
    </div>

    <nav class="tabs">
      <div class="tab active">í™ˆ</div>
      <div class="tab">ë°œê²¬</div>
      <div class="tab">í˜œíƒ</div>
      <div class="tab">íˆ¬ì</div>
      <div class="tab">ì „ì²´</div>
    </nav>
  </section>

  <!-- ===== TX ===== -->
  <section id="tx" class="view">
    <div class="appbar">
      <button class="back" onclick="goHome()">â€¹</button>
      <h1>ì…ì¶œê¸ˆí†µì¥</h1>
    </div>

    <div class="header-box">
      <div class="acc-title">MY ì…ì¶œê¸ˆí†µì¥</div>
      <div class="acc-num">100-116-054706</div>
      <div class="row">
        <button class="btn gray">ê°€ì ¸ì˜¤ê¸°</button>
        <button class="btn blue">ì´ì²´í•˜ê¸°</button>
      </div>
      <div class="chips">
        <button id="openFilter" class="chip">3ê°œì›”Â·ì „ì²´Â·ìµœì‹ ìˆœ âŒ„</button>
      </div>
    </div>

    <div id="txList" class="tx-list"></div>
  </section>

  <!-- Mask + Sheet -->
  <div id="mask" class="mask"></div>
  <div id="sheet" class="sheet" role="dialog" aria-modal="true">
    <div class="sheet-head">ì¡°íšŒ ì¡°ê±´</div>
    <div class="sheet-body">
      <div style="font-weight:800;margin:6px 0 8px">ê¸°ê°„</div>
      <div class="grid-4" id="periodBtns">
        <button class="opt" data-period="1m">1ê°œì›”</button>
        <button class="opt selected" data-period="3m">3ê°œì›”</button>
        <button class="opt" data-period="6m">6ê°œì›”</button>
        <button class="opt" data-period="1y">1ë…„</button>
      </div>

      <div style="font-weight:800;margin:16px 0 8px">ìœ í˜•</div>
      <div class="grid-3" id="typeBtns">
        <button class="opt selected" data-type="all">ì „ì²´</button>
        <button class="opt" data-type="withdraw">ì¶œê¸ˆë§Œ</button>
        <button class="opt" data-type="deposit">ì…ê¸ˆë§Œ</button>
      </div>

      <div style="font-weight:800;margin:16px 0 8px">ìˆœì„œ</div>
      <div class="grid-2" id="sortBtns">
        <button class="opt selected" data-sort="latest">ìµœì‹ ìˆœ</button>
        <button class="opt" data-sort="oldest">ê³¼ê±°ìˆœ</button>
      </div>

      <div style="font-weight:800;margin:16px 0 8px">ê¸ˆì•¡</div>
      <div class="range">
        <input id="minAmt" placeholder="ìµœì†Œ" inputmode="numeric">
        <input id="maxAmt" placeholder="ìµœëŒ€" inputmode="numeric">
      </div>

      <button id="applyFilter" class="confirm">í™•ì¸</button>
    </div>
  </div>

  <script>
    // Views
    const home = document.getElementById('home');
    const tx = document.getElementById('tx');
    const acctArea = document.getElementById('acctArea');
    const transferBtn = document.getElementById('btnTransfer');

    function openTx(){ home.classList.add('hiddenLeft'); tx.classList.add('active'); }
    function goHome(){ tx.classList.remove('active'); home.classList.remove('hiddenLeft'); }

    acctArea.addEventListener('click', openTx);
    transferBtn.addEventListener('click', ()=> alert('ë°ëª¨: ì´ì²´ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'));

    // Fake data
    const data = [
      {date:'2025-10-24', time:'14:00', name:'CDí˜„ê¸ˆì§€ê¸‰', type:'withdraw', amount:100000, balance:10300},
      {date:'2025-10-24', time:'07:47', name:'ì´í¬ì§„', type:'deposit', amount:100000, balance:110300},
      {date:'2025-10-20', time:'08:37', name:'ì´í¬ì§„', type:'deposit', amount:100000, balance:110300},
      {date:'2025-10-20', time:'09:12', name:'ì§€ì—ìŠ¤25 ê°€ì•¼ëŒ€í•™êµ', type:'withdraw', amount:100000, balance:10300},
      {date:'2025-10-06', time:'10:27', name:'ì´í¬ì§„', type:'deposit', amount:300000, balance:310300},
      {date:'2025-10-06', time:'10:35', name:'CDí˜„ê¸ˆì§€ê¸‰', type:'withdraw', amount:300000, balance:10300},
      {date:'2025-09-27', time:'05:51', name:'ì´ì', type:'deposit', amount:0, balance:10300},
      {date:'2025-09-23', time:'08:42', name:'ì´í¬ì§„', type:'deposit', amount:100000, balance:110300},
      {date:'2025-09-23', time:'11:32', name:'CDí˜„ê¸ˆì§€ê¸‰', type:'withdraw', amount:100000, balance:10300},
      {date:'2025-09-14', time:'11:32', name:'ì§€ì—ìŠ¤25 ê°€ì•¼ëŒ€í•™êµ', type:'withdraw', amount:50000, balance:10300},
      {date:'2025-09-14', time:'09:50', name:'ì´í¬ì§„', type:'deposit', amount:50000, balance:60300},
      {date:'2025-08-20', time:'08:39', name:'ì´í¬ì§„', type:'deposit', amount:100000, balance:110300},
      {date:'2025-08-20', time:'10:53', name:'CDí˜„ê¸ˆì§€ê¸‰', type:'withdraw', amount:100000, balance:10300},
      {date:'2025-08-13', time:'08:39', name:'ì´í¬ì§„', type:'deposit', amount:300000, balance:310300},
      {date:'2025-08-13', time:'14:31', name:'ì„ìƒìš´ë™ì¬í™œí•™íšŒ', type:'withdraw', amount:300000, balance:10300},
      {date:'2025-07-30', time:'08:39', name:'ì´í¬ì§„', type:'deposit', amount:50000, balance:60300},
      {date:'2025-07-30', time:'11:53', name:'ì§€ì—ìŠ¤25 ê°€ì•¼ëŒ€í•™êµ', type:'withdraw', amount:50000, balance:10300},
      {date:'2025-07-28', time:'08:03', name:'ì´í¬ì§„', type:'deposit', amount:160000, balance:170300},
      {date:'2025-07-28', time:'13:21', name:'ì¡°ì„±í•™', type:'withdraw', amount:100000, balance:70300},
      {date:'2025-07-28', time:'13:23', name:'ë°•ê¸°ì¤€', type:'withdraw', amount:50000, balance:20300},
      {date:'2025-07-29', time:'09:48', name:'ì§€ì—ìŠ¤25 ê°€ì•¼ëŒ€í•™êµ', type:'withdraw', amount:10000, balance:10300},
      {date:'2025-07-26', time:'12:46', name:'ì§€ì—ìŠ¤25 ì‘ì²œë‹¬ë¹›ì ', type:'withdraw', amount:9700, balance:20300},
      {date:'2025-07-26', time:'12:32', name:'ì´í¬ì§„', type:'deposit', amount:20000, balance:30000},
      {date:'2025-07-11', time:'16:05', name:'ì´í¬ì§„', type:'deposit', amount:300000, balance:310000},
      {date:'2025-07-11', time:'17:15', name:'ì •ë‘ìˆœ', type:'withdraw', amount:300000, balance:10000},
      {date:'2025-06-03', time:'11:00', name:'ì´í¬ì§„', type:'deposit', amount:250000, balance:260000},
      {date:'2025-06-04', time:'12:05', name:'ì¡°ì„±í•™', type:'withdraw', amount:100000, balance:160000},
      {date:'2025-06-04', time:'12:11', name:'ìµœì˜ì€', type:'withdraw', amount:100000, balance:60000},
      {date:'2025-06-06', time:'10:24', name:'ì”¨ìœ (CU) ëª…ì¥ìƒˆì‹¹ì ', type:'withdraw', amount:50000, balance:10000},
      {date:'2025-06-01', time:'12:01', name:'ì´í¬ì§„', type:'deposit', amount:10000, balance:30000},
      {date:'2025-06-01', time:'11:43', name:'ì´í¬ì§„', type:'deposit', amount:20000, balance:20000},
      {date:'2025-06-01', time:'12:04', name:'ë¥˜ì¢…í˜¸', type:'withdraw', amount:10000, balance:20000},
      {date:'2025-06-01', time:'12:17', name:'ì„œì˜ì£¼(ì°©í•œì–´ë¬´ê°€ê²Œ', type:'withdraw', amount:10000, balance:10000},
      {date:'2025-05-13', time:'08:34', name:'ì´í¬ì§„', type:'deposit', amount:50000, balance:50000},
      {date:'2025-05-13', time:'09:08', name:'ì§€ì—ìŠ¤25 ê°€ì•¼ëŒ€í•™êµ', type:'withdraw', amount:50000, balance:0},
      {date:'2025-02-19', time:'16:00', name:'ì´í¬ì§„', type:'deposit', amount:100000, balance:100000},
      {date:'2025-02-19', time:'16:22', name:'CDí˜„ê¸ˆì§€ê¸‰', type:'withdraw', amount:100000, balance:0},
      {date:'2025-02-05', time:'21:32', name:'ì´í¬ì§„', type:'deposit', amount:32000, balance:32000},
      {date:'2025-02-05', time:'21:34', name:'OPENAI*CHATGPT', type:'withdraw', amount:32000, balance:0},
    ];

    // Filter state
    let state = { period:'3m', type:'all', sort:'latest', min:null, max:null };

    const txList = document.getElementById('txList');
    function fmtKR(n){ return Number(n).toLocaleString('ko-KR'); }
    function withinPeriod(d, period){
      const end = new Date('2025-11-08T23:59:59'); // ì˜¤ëŠ˜ ê¸°ì¤€
      const start = new Date(end);
      if(period==='1m') start.setMonth(end.getMonth()-1);
      if(period==='3m') start.setMonth(end.getMonth()-3);
      if(period==='6m') start.setMonth(end.getMonth()-6);
      if(period==='1y') start.setFullYear(end.getFullYear()-1);
      const dt = new Date(d.date + 'T' + (d.time||'00:00'));
      return dt >= start && dt <= end;
    }
    function render(){
      let items = data.filter(d => withinPeriod(d, state.period));

      if(state.type!=='all') items = items.filter(d => d.type===state.type);
      if(state.min) items = items.filter(d => Math.abs(d.amount) >= Number(state.min));
      if(state.max) items = items.filter(d => Math.abs(d.amount) <= Number(state.max));

      items.sort((a,b)=> state.sort==='latest'
        ? new Date(b.date+'T'+b.time) - new Date(a.date+'T'+a.time)
        : new Date(a.date+'T'+a.time) - new Date(b.date+'T'+b.time));

      txList.innerHTML = items.map(d=>{
        const cls = d.type==='deposit' ? 'deposit' : 'withdraw';
        const sign = d.type==='deposit' ? '+' : '-';
        return `<div class="tx-item">
          <div class="tx-top"><div>${d.date} | ${d.time}</div><div class="tx-amt ${cls}">${sign}${fmtKR(d.amount)}ì›</div></div>
          <div class="tx-name">${d.name}</div>
          <div class="tx-bal">ì”ì•¡ ${fmtKR(d.balance)} ì›</div>
        </div>`
      }).join('');
    }
    render();

    // Sheet controls
    const mask = document.getElementById('mask');
    const sheet = document.getElementById('sheet');
    const openFilter = document.getElementById('openFilter');
    const applyBtn = document.getElementById('applyFilter');

    function openSheet(){ mask.classList.add('show'); sheet.classList.add('show'); }
    function closeSheet(){ mask.classList.remove('show'); sheet.classList.remove('show'); }
    mask.addEventListener('click', closeSheet);
    openFilter.addEventListener('click', openSheet);

    function singleSelect(containerId, key){
      const box = document.getElementById(containerId);
      box.addEventListener('click', (e)=>{
        const btn = e.target.closest('.opt'); if(!btn) return;
        Array.from(box.querySelectorAll('.opt')).forEach(b=>b.classList.remove('selected'));
        btn.classList.add('selected');
        state[key] = btn.dataset[key];
      });
    }
    singleSelect('periodBtns', 'period');
    singleSelect('typeBtns', 'type');
    singleSelect('sortBtns', 'sort');

    applyBtn.addEventListener('click', ()=>{
      state.min = document.getElementById('minAmt').value.trim();
      state.max = document.getElementById('maxAmt').value.trim();
      // update chip label
      const periodMap = { '1m':'1ê°œì›”', '3m':'3ê°œì›”', '6m':'6ê°œì›”', '1y':'1ë…„' };
      const typeMap   = { 'all':'ì „ì²´', 'withdraw':'ì¶œê¸ˆë§Œ', 'deposit':'ì…ê¸ˆë§Œ' };
      const sortMap   = { 'latest':'ìµœì‹ ìˆœ', 'oldest':'ê³¼ê±°ìˆœ' };
      document.getElementById('openFilter').textContent = `${periodMap[state.period]}Â·${typeMap[state.type]}Â·${sortMap[state.sort]} âŒ„`;
      render();
      closeSheet();
    });
  </script>
</body>
</html>
