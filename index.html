<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Kbank – 데모</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root{
      --kb-blue:#0c3bd9;
      --kb-blue-700:#0b2fb1;
      --kb-bg:#eef2ff;
      --kb-card:#ffffff;
      --kb-gray:#6b7280;
      --kb-text:#0f172a;
      --radius:16px;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{margin:0;height:100%;background:#f6f7fb;color:var(--kb-text);font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR","Segoe UI",sans-serif}
    .view{position:fixed;inset:0;overflow:auto;background:var(--kb-card);transition:transform .35s ease}
    #home{transform:translateX(0)}
    #tx{transform:translateX(100%)}
    #tx.active{transform:translateX(0)}
    #home.hidden{transform:translateX(-100%)}
    .appbar{position:sticky;top:0;z-index:10;background:var(--kb-card);display:flex;align-items:center;justify-content:center;height:56px;border-bottom:1px solid #edf0f4}
    .appbar .back{position:absolute;left:8px;background:none;border:0;font-size:22px;height:56px;width:48px}
    .appbar h1{font-size:18px;margin:0}
    .wrap{padding:14px 14px 92px}
    .banner{background:#e9f0ff;border:1px solid #dbe6ff;color:#1e3a8a;border-radius:14px;padding:14px;display:flex;align-items:center;gap:10px}
    .section-title{font-weight:800;margin:16px 4px 8px}
    .card{background:var(--kb-card);border-radius:var(--radius);box-shadow:0 1px 6px rgba(0,0,0,.06);padding:16px}
    #acctArea{display:block;border:1px solid #eff3fb;border-radius:14px;padding:16px;cursor:pointer}
    #acctArea:active{transform:scale(.995)}
    .acct-num{color:#64748b;margin:8px 0 12px}
    .balance{font-size:30px;font-weight:900;letter-spacing:-.5px}
    .btns{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .btn{height:48px;border-radius:12px;border:0;font-weight:800}
    .btn.gray{background:#eef1f7;color:#111}
    .btn.blue{background:var(--kb-blue);color:#fff}
    .quick{display:flex;gap:18px;justify-content:space-between;margin-top:14px}
    .qitem{display:flex;flex-direction:column;align-items:center;gap:8px;color:#374151;font-size:12px}
    .qicon{width:48px;height:48px;border-radius:12px;background:#f0f3fb;display:flex;align-items:center;justify-content:center;font-size:20px}
    .tabs{position:fixed;left:0;right:0;bottom:0;background:var(--kb-card);border-top:1px solid #edf0f4;display:flex;justify-content:space-around;padding:8px 6px env(safe-area-inset-bottom)}
    .tab{display:flex;flex-direction:column;align-items:center;font-size:11px;color:#6b7280;gap:4px}
    .tab.active{color:var(--kb-blue)}
    .header-box{padding:12px 16px 8px;border-bottom:1px solid #edf0f4}
    .acc-title{font-size:22px;font-weight:900;margin:6px 0 2px}
    .acc-num{font-size:14px;color:#64748b}
    .row{display:flex;align-items:center;gap:12px;margin:14px 0 6px}
    .row .btn{flex:1}
    .chips{display:flex;gap:10px;align-items:center}
    .chip{font-size:12px;color:#475569;border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;background:#fff}
    .tx-list{margin-top:8px}
    .tx-item{padding:14px 16px;border-bottom:1px solid #f0f2f7;background:#fff}
    /* ✅ 수정 */
    .tx-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:6px;color:#9ca3af;font-size:12px}
    .tx-name{font-weight:700}
    .tx-amt{font-size:17px;font-weight:900;font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR","Segoe UI",sans-serif}
    .deposit{color:#2563eb}
    .withdraw{color:#d32f2f}
    .tx-bal{color:#94a3b8;font-size:12px;margin-top:2px;text-align:right}
    .mask{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:.2s}
    .mask.show{opacity:1;pointer-events:auto}
    .sheet{position:fixed;left:0;right:0;bottom:-100%;background:#fff;border-top-left-radius:20px;border-top-right-radius:20px;box-shadow:0 -10px 30px rgba(0,0,0,.2);transition:bottom .25s ease;z-index:30}
    .sheet.show{bottom:0}
    .sheet-head{padding:16px;border-bottom:1px solid #edf0f4;font-weight:800}
    .sheet-body{padding:14px 16px 22px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .opt{padding:12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;text-align:center}
    .opt.selected{border-color:var(--kb-blue);box-shadow:0 0 0 3px rgba(12,59,217,.12);font-weight:800;color:var(--kb-blue)}
    .range{display:flex;gap:10px}
    .range input{flex:1;height:44px;border:1px solid #e5e7eb;border-radius:12px;padding:0 12px}
    .confirm{margin-top:10px;width:100%;height:52px;border:0;border-radius:14px;background:var(--kb-blue);color:#fff;font-weight:900}
  </style>
</head>
<body>
  <!-- HOME -->
  <section id="home" class="view">
    <div class="wrap">
      <div class="banner">한국투자증권 · 지금 국내 우량주 2주 뿌리는 중!</div>
      <h3 class="section-title">Kbank</h3>
      <div class="card">
        <div id="acctArea">
          <div class="acc-label" style="color:#64748b;margin-bottom:6px">MY 입출금통장 100-116-054706</div>
          <div class="balance">10,300원</div>
        </div>
        <div class="btns">
          <button class="btn gray" id="btnGet">가져오기</button>
          <button class="btn blue" id="btnTransfer">이체하기</button>
        </div>
      </div>
    </div>
    <nav class="tabs">
      <div class="tab active">홈</div><div class="tab">발견</div><div class="tab">혜택</div><div class="tab">투자</div><div class="tab">전체</div>
    </nav>
  </section>

  <!-- TX -->
  <section id="tx" class="view">
    <div class="appbar"><button class="back" onclick="goHome()">‹</button><h1>입출금통장</h1></div>
    <div class="header-box">
      <div class="acc-title">MY 입출금통장</div>
      <div class="acc-num">100-116-054706</div>
      <div class="row">
        <button class="btn gray">가져오기</button>
        <button class="btn blue">이체하기</button>
      </div>
      <div class="chips"><button id="openFilter" class="chip">3개월·전체·최신순 ⌄</button></div>
    </div>
    <div id="txList" class="tx-list"></div>
  </section>

  <!-- Filter -->
  <div id="mask" class="mask"></div>
  <div id="sheet" class="sheet">
    <div class="sheet-head">조회 조건</div>
    <div class="sheet-body">
      <div style="font-weight:800;margin:6px 0 8px">기간</div>
      <div class="grid-4" id="periodBtns">
        <button class="opt" data-period="1m">1개월</button>
        <button class="opt selected" data-period="3m">3개월</button>
        <button class="opt" data-period="6m">6개월</button>
        <button class="opt" data-period="1y">1년</button>
      </div>
      <div style="font-weight:800;margin:16px 0 8px">유형</div>
      <div class="grid-3" id="typeBtns">
        <button class="opt selected" data-type="all">전체</button>
        <button class="opt" data-type="withdraw">출금만</button>
        <button class="opt" data-type="deposit">입금만</button>
      </div>
      <div style="font-weight:800;margin:16px 0 8px">순서</div>
      <div class="grid-2" id="sortBtns">
        <button class="opt selected" data-sort="latest">최신순</button>
        <button class="opt" data-sort="oldest">과거순</button>
      </div>
      <div style="font-weight:800;margin:16px 0 8px">금액</div>
      <div class="range"><input id="minAmt" placeholder="최소" inputmode="numeric"><input id="maxAmt" placeholder="최대" inputmode="numeric"></div>
      <button id="applyFilter" class="confirm">확인</button>
    </div>
  </div>

  <script>
    const home=document.getElementById('home');
    const tx=document.getElementById('tx');
    const acctArea=document.getElementById('acctArea');
    const transferBtn=document.getElementById('btnTransfer');
    acctArea.addEventListener('click',()=>{home.classList.add('hidden');tx.classList.add('active');});
    function goHome(){tx.classList.remove('active');home.classList.remove('hidden');}
    transferBtn.addEventListener('click',()=>alert('데모: 이체 기능은 준비 중입니다.'));

    const data=[
      {date:'2025-10-24',time:'14:00',name:'CD현금지급',type:'withdraw',amount:100000,balance:10300},
      {date:'2025-10-24',time:'07:47',name:'이희진',type:'deposit',amount:100000,balance:110300},
      {date:'2025-10-20',time:'09:12',name:'지에스25 가야대학교',type:'withdraw',amount:100000,balance:10300},
      {date:'2025-10-20',time:'08:37',name:'이희진',type:'deposit',amount:100000,balance:110300}
    ];
    let state={period:'3m',type:'all',sort:'latest',min:null,max:null};
    const txList=document.getElementById('txList');
    function fmtKR(n){return Number(n).toLocaleString('ko-KR');}
    function withinPeriod(d,p){const e=new Date('2025-11-08T23:59:59');const s=new Date(e);if(p==='1m')s.setMonth(e.getMonth()-1);if(p==='3m')s.setMonth(e.getMonth()-3);if(p==='6m')s.setMonth(e.getMonth()-6);if(p==='1y')s.setFullYear(e.getFullYear()-1);const dt=new Date(d.date+'T'+d.time);return dt>=s&&dt<=e;}
    function render(){
      let items=data.filter(d=>withinPeriod(d,state.period));
      if(state.type!=='all')items=items.filter(d=>d.type===state.type);
      if(state.min)items=items.filter(d=>Math.abs(d.amount)>=Number(state.min));
      if(state.max)items=items.filter(d=>Math.abs(d.amount)<=Number(state.max));
      items.sort((a,b)=>state.sort==='latest'?new Date(b.date+'T'+b.time)-new Date(a.date+'T'+a.time):new Date(a.date+'T'+a.time)-new Date(b.date+'T'+b.time));
      txList.innerHTML=items.map(d=>`<div class="tx-item">
        <div class="tx-top"><div>${d.date} | ${d.time}</div><div class="tx-amt ${d.type==='deposit'?'deposit':'withdraw'}">${d.type==='deposit'?'+':'-'}${fmtKR(d.amount)}원</div></div>
        <div class="tx-name">${d.name}</div><div class="tx-bal">잔액 ${fmtKR(d.balance)} 원</div></div>`).join('');
    }
    render();

    const mask=document.getElementById('mask');
    const sheet=document.getElementById('sheet');
    const openFilter=document.getElementById('openFilter');
    const applyBtn=document.getElementById('applyFilter');
    openFilter.addEventListener('click',()=>{mask.classList.add('show');sheet.classList.add('show');});
    mask.addEventListener('click',()=>{mask.classList.remove('show');sheet.classList.remove('show');});
    function selectSingle(id,key){const b=document.getElementById(id);b.addEventListener('click',e=>{const t=e.target.closest('.opt');if(!t)return;Array.from(b.querySelectorAll('.opt')).forEach(x=>x.classList.remove('selected'));t.classList.add('selected');state[key]=t.dataset[key];});}
    selectSingle('periodBtns','period');selectSingle('typeBtns','type');selectSingle('sortBtns','sort');
    applyBtn.addEventListener('click',()=>{state.min=document.getElementById('minAmt').value.trim();state.max=document.getElementById('maxAmt').value.trim();const p={'1m':'1개월','3m':'3개월','6m':'6개월','1y':'1년'},t={'all':'전체','withdraw':'출금만','deposit':'입금만'},s={'latest':'최신순','oldest':'과거순'};document.getElementById('openFilter').textContent=`${p[state.period]}·${t[state.type]}·${s[state.sort]} ⌄`;render();mask.classList.remove('show');sheet.classList.remove('show');});
  </script>
</body>
</html>
